<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>LS - Cotizaciones_Listado</title>
    <link rel="stylesheet" href="../../assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../assets/css/Footer-Dark-Multi-Column-icons.css">
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-md bg-body container">
            <div class="container-fluid"><a class="navbar-brand navbar-expand-lg"><img class="rounded-circle" src="../../assets/img/logo.png" style="width: 50px;margin-right: 10px;">Lucendi Solar</a>
                <div class="collapse navbar-collapse" id="navcol-1">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link active" href="#">Cotizaciones</a></li>
                        <li class="nav-item"><a class="nav-link" href="/clientes/">Clientes</a></li>
                        <li class="nav-item"><a class="nav-link" href="/empresas">Empresas</a></li>
                        <li class="nav-item"><a class="nav-link" href="/conceptos">Conceptos</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <nav class="navbar navbar-expand-md bg-dark py-0" data-bs-theme="dark">
            <div class="container-fluid">
                <div class="container">
                    <div class="collapse navbar-collapse text-start justify-content-sm-end d-xs-flex" id="navcol-2">
                        <ul class="navbar-nav">
                            <li class="nav-item"><a class="nav-link" href="/cotizaciones/">Todas las Cotizaciones</a></li>
                            <li class="nav-item"><a class="nav-link active" href="#">Nueva</a></li>
                            <li class="nav-item"><a class="nav-link disabled" href="#">Detalles</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    <main id="app">
        <div class="container pt-3" v-if="cotizacion.id != 0">
            <div id="folio" class="d-flex">
                <div class="me-auto"><small class="me-1">Folio&nbsp;</small><span class="badge bg-danger">#{{cotizacion.folio}}</span>
                    <p class="text-muted small mt-1">{{cotizacion.fechaReadable}}</p>
                </div><small class="text-muted">{{cotizacion.cliente._id}}</small>
            </div>
            <div id="cliente">
                <fieldset id="clienteEmpresa" v-if="cotizacion.cliente.empresa_id">
                    <legend>Cliente</legend>
                    <div class="row mb-2"><label class="form-label col-12 col-form-label col-sm-2">Nombre</label>
                        <div class="col col-12 col-sm-10"><input type="text" class="form-control col-10" :value="cotizacion.cliente.empresa_id.nombre" readonly="" disabled=""></div>
                    </div>
                    <div class="row mb-2"><label class="form-label col-12 col-form-label col-sm-2">Atención</label>
                        <div class="col col-12 col-sm-10"><input type="text" class="form-control col-10" :value="cotizacion.cliente.nombre" readonly="" disabled=""></div>
                    </div>
                    <div class="row mb-2"><label class="form-label col-12 col-form-label col-sm-2">Correo</label>
                        <div class="col col-12 col-sm-10"><input type="text" class="form-control col-10" :value="cotizacion.cliente.empresa_id.correo" readonly="" disabled=""></div>
                    </div>
                    <div class="row mb-2"><label class="form-label col-12 col-form-label col-sm-2">Teléfono</label>
                        <div class="col col-12 col-sm-10"><input type="text" class="form-control col-10" :value="cotizacion.cliente.empresa_id.telefono" readonly="" disabled=""></div>
                    </div>
                    <div class="row mb-2"><label class="form-label col-12 col-form-label col-sm-2">RFC</label>
                        <div class="col col-12 col-sm-10"><input type="text" class="form-control col-10" :value="cotizacion.cliente.empresa_id.RFC" readonly="" disabled=""></div>
                    </div>
                    <div class="row mb-2"><label class="form-label col-12 col-form-label col-sm-2">Dirección</label>
                        <div class="col col-12 col-sm-10"><input type="text" class="form-control col-10" :value="cotizacion.cliente.empresa_id.direccion" readonly="" disabled=""></div>
                    </div>
                </fieldset>
                <fieldset id="cliente-1" v-else="">
                    <legend>Cliente</legend>
                    <div class="row mb-2"><label class="form-label col-12 col-form-label col-sm-2">Nombre</label>
                        <div class="col col-12 col-sm-10"><input type="text" class="form-control col-10" :value="cotizacion.cliente.nombre" readonly="" disabled=""></div>
                    </div>
                    <div class="row mb-2"><label class="form-label col-12 col-form-label col-sm-2">Correo</label>
                        <div class="col col-12 col-sm-10"><input type="text" class="form-control col-10" :value="cotizacion.cliente.correo" readonly="" disabled=""></div>
                    </div>
                    <div class="row mb-2"><label class="form-label col-12 col-form-label col-sm-2">Teléfono</label>
                        <div class="col col-12 col-sm-10"><input type="text" class="form-control col-10" :value="cotizacion.cliente.telefono" readonly="" disabled=""></div>
                    </div>
                    <div class="row mb-2"><label class="form-label col-12 col-form-label col-sm-2">RFC</label>
                        <div class="col col-12 col-sm-10"><input type="text" class="form-control col-10" :value="cotizacion.cliente.RFC" readonly="" disabled=""></div>
                    </div>
                    <div class="row mb-2"><label class="form-label col-12 col-form-label col-sm-2">Dirección</label>
                        <div class="col col-12 col-sm-10"><input type="text" class="form-control col-10" :value="cotizacion.cliente.direccion" readonly="" disabled=""></div>
                    </div>
                </fieldset>
            </div>
            <div id="conceptos" class="mt-3">
                <h4>Conceptos</h4>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th class="d-none d-md-table-cell">#</th>
                                <th>Descripción</th>
                                <th class="d-none d-md-table-cell">Precio</th>
                                <th class="d-none d-md-table-cell">Cantidad</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="concepto in cotizacion.conceptos">
                                <td class="d-none d-md-table-cell">{{concepto.concepto.codigo}}</td>
                                <td>{{concepto.concepto.descripcion}}</td>
                                <td class="d-none d-md-table-cell">{{money(concepto.concepto.precio)}}</td>
                                <td class="d-none d-md-table-cell">{{concepto.cantidad}}</td>
                                <td>{{money(concepto.total)}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="row">
                    <div class="col col-6 col-lg-8 d-flex"><label class="col-form-label col-form-label ms-auto">Subtotal</label></div>
                    <div class="col"><input type="text" class="col-10 form-control" readonly="" disabled="" :value="money(cotizacion.subtotal)"></div>
                </div>
            </div>
            <div id="impuestos" class="mt-3">
                <h4>Impuestos</h4>
                <div class="row">
                    <div class="col col-12 col-lg-2 d-flex"><label class="form-label col-form-label">IVA</label><span class="badge ms-auto bg-warning my-auto" v-if="cotizacion.retencionIVA">Retención IVA</span></div>
                    <div class="col"><input type="text" class="col-10 form-control" readonly="" disabled="" :value="money(cotizacion.IVA)"></div>
                </div>
                <div class="row mt-2" v-if="cotizacion.retencionISR != -1">
                    <div class="col col-12 col-lg-2 d-flex"><label class="form-label col-form-label">ISR</label><span class="badge ms-auto bg-warning my-auto">{{cotizacion.retencionISR}}%</span></div>
                    <div class="col"><input type="text" class="col-10 form-control" readonly="" disabled="" :value="money(cotizacion.ISR)"></div>
                </div>
                <div class="row mt-2">
                    <div class="col col-12 col-lg-2 d-flex"><label class="col-form-label col-form-label">Total</label></div>
                    <div class="col"><input type="text" class="col-10 form-control" readonly="" disabled="" :value="money(cotizacion.total)"></div>
                </div>
            </div>
            <div id="extras" class="mt-4">
                <h4>Observaciones y entrega</h4><textarea class="form-control" disabled="" :value="cotizacion.observaciones"></textarea>
                <div class="row mt-2">
                    <div class="col col-12 col-lg-2 d-flex"><label class="col-form-label col-form-label">Entrega</label></div>
                    <div class="col"><input type="text" class="col-10 form-control" readonly="" disabled="" :value="cotizacion.entrega"></div>
                </div>
            </div>
            <hr>
            <div id="save_cancel-1" class="d-flex mt-3 mb-5"><a class="my-auto me-auto" :href="api + 'cotizacion/print/' + cotizacion.id" target="_blank" :download="'Cotización ' + cotizacion.folio + '.pdf'"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-download me-2">
                        <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"></path>
                        <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"></path>
                    </svg>Descargar</a><button class="btn btn-danger me-2" type="button" v-on:click="archive" v-if="!cotizacion.archivada"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-archive-fill me-2">
                        <path d="M12.643 15C13.979 15 15 13.845 15 12.5V5H1v7.5C1 13.845 2.021 15 3.357 15zM5.5 7h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1M.8 1a.8.8 0 0 0-.8.8V3a.8.8 0 0 0 .8.8h14.4A.8.8 0 0 0 16 3V1.8a.8.8 0 0 0-.8-.8H.8z"></path>
                    </svg>Archivar</button><button class="btn btn-success" type="button" v-on:click="update" v-if="!cotizacion.archivada"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-pencil me-2">
                        <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"></path>
                    </svg>Editar</button><button class="btn btn-primary ms-2" type="button" v-on:click="ordenDeVenta" v-if="!cotizacion.archivada"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-file-pdf-fill me-2">
                        <path d="M5.523 10.424c.14-.082.293-.162.459-.238a7.878 7.878 0 0 1-.45.606c-.28.337-.498.516-.635.572a.266.266 0 0 1-.035.012.282.282 0 0 1-.026-.044c-.056-.11-.054-.216.04-.36.106-.165.319-.354.647-.548m2.455-1.647c-.119.025-.237.05-.356.078a21.035 21.035 0 0 0 .5-1.05 11.96 11.96 0 0 0 .51.858c-.217.032-.436.07-.654.114m2.525.939a3.888 3.888 0 0 1-.435-.41c.228.005.434.022.612.054.317.057.466.147.518.209a.095.095 0 0 1 .026.064.436.436 0 0 1-.06.2.307.307 0 0 1-.094.124.107.107 0 0 1-.069.015c-.09-.003-.258-.066-.498-.256M8.278 4.97c-.04.244-.108.524-.2.829a4.86 4.86 0 0 1-.089-.346c-.076-.353-.087-.63-.046-.822.038-.177.11-.248.196-.283a.517.517 0 0 1 .145-.04c.013.03.028.092.032.198.005.122-.007.277-.038.465z"></path>
                        <path fill-rule="evenodd" d="M4 0h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2m.165 11.668c.09.18.23.343.438.419.207.075.412.04.58-.03.318-.13.635-.436.926-.786.333-.401.683-.927 1.021-1.51a11.64 11.64 0 0 1 1.997-.406c.3.383.61.713.91.95.28.22.603.403.934.417a.856.856 0 0 0 .51-.138c.155-.101.27-.247.354-.416.09-.181.145-.37.138-.563a.844.844 0 0 0-.2-.518c-.226-.27-.596-.4-.96-.465a5.76 5.76 0 0 0-1.335-.05 10.954 10.954 0 0 1-.98-1.686c.25-.66.437-1.284.52-1.794.036-.218.055-.426.048-.614a1.238 1.238 0 0 0-.127-.538.7.7 0 0 0-.477-.365c-.202-.043-.41 0-.601.077-.377.15-.576.47-.651.823-.073.34-.04.736.046 1.136.088.406.238.848.43 1.295a19.707 19.707 0 0 1-1.062 2.227 7.662 7.662 0 0 0-1.482.645c-.37.22-.699.48-.897.787-.21.326-.275.714-.08 1.103z"></path>
                    </svg>Orden de Venta</button></div>
        </div>
        <div class="container mt-3" id="error-1" v-if="error.code != 200">
            <div id="err-403">
                <h1 class="d-flex text-danger"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-exclamation-circle my-auto me-3">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"></path>
                        <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"></path>
                    </svg>Error {{error.code}}</h1>
                <p>{{error.userMessage}}</p><code>{{error.message}}</code>
            </div>
        </div>
        <div id="loader-1" class="py-5 w-100 d-flex" v-if="loading">
            <div class="mx-auto d-flex my-5"><span class="spinner-border me-3" role="status"></span><span class="my-auto">Cargando...</span></div>
        </div>
    </main>
    <script src="../../assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="../../assets/js/bs-init.js"></script>
    <script src="../../assets/js/login.js"></script>
    <script src="../../assets/js/vue.global.min.js"></script>
    <script src="../../assets/js/main.js"></script>
    <script src="../../assets/js/cotizaciones/show.js"></script>
</body>

</html>